Now we are ready to prove the proposition: for the axiom 3.3.2, we may assume that X is a 1-dimensional local domain, and the result follows the fact that there is a line bundle \mathcal{L} on X such that f^{\*}(\lambda^{\prime})\simeq\mathcal{L}\otimes f^{\*}(\lambda), where f^{\*}(\lambda) is defined as in 3.1.7; the axiom 3.3.2 follows from a similar argument.
∎

We now prove a general duality theorem for schemes with a pinning:

###### Theorem 3.3.4 (Duality).

Let (S,\lambda) be a base scheme with a pinning. Given a MW-(pre)module M over S, for every S-field \operatorname{Spec}E, we let

|  |  |  |  |
| --- | --- | --- | --- |
| (3.3.4.a) |  | \displaystyle\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n}(E)=M\_{n}(E,\lambda\_{E% }). |  |

Reciprocally given a MW-cycle (pre)homodule \mathcal{M} over S, we let

|  |  |  |  |
| --- | --- | --- | --- |
| (3.3.4.b) |  | \displaystyle\operatorname{D}\_{\lambda}(\mathcal{M})\_{n}(E)=\mathcal{M}\_{n}(E,% \lambda\_{E}^{\vee}). |  |

Then these two constructions establish two functors that are equivalences of categories inverse to each other

|  |  |  |  |
| --- | --- | --- | --- |
| (3.3.4.c) |  | \displaystyle\operatorname{\mathcal{D}}\_{\lambda}:\operatorname{MW-Mod}\_{S}% \simeq\operatorname{MW-Homod}\_{S}:\operatorname{D}\_{\lambda}. |  |

###### Proof.

It is not hard to see that the maps (3.3.4.a) and (3.3.4.b) define functors \operatorname{\mathcal{D}}\_{\lambda} and \operatorname{D}\_{\lambda} that are inverse to each other.
Keeping the previous notations, it remains to check that \operatorname{D}\_{\lambda}(\mathcal{M}) lives in \operatorname{MW-Mod}\_{S} and \operatorname{\mathcal{D}}\_{\lambda}(M) lives in \operatorname{MW-Homod}\_{S}.
We now define the functorialities 1.1.1 through 1.1.1.

(D1’):
:   For a morphism of S-fields \phi:E\to F, we define the map

    |  |  |  |  |
    | --- | --- | --- | --- |
    | (3.3.4.d) |  | \displaystyle\phi\_{!}:\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n}(E)=M\_{n}(E,% \lambda\_{E})\xrightarrow{\ref{itm:D1}}M\_{n}(F,\phi^{\*}\lambda\_{E})\simeq M\_{n}% (F,\lambda\_{F}\otimes\omega\_{F/E})=\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n}% (F,\omega\_{F/E}) |  |

    thanks to 3.2.1.

(D2’):
:   For a finite morphism of S-fields \phi:E\to F, we have a map

    |  |  |  |  |
    | --- | --- | --- | --- |
    | (3.3.4.e) |  | \displaystyle\phi^{\*}:\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n}(F)=M\_{n}(F,% \lambda\_{F})\xrightarrow{\eqref{eq:pinfinpf}}M\_{n}(E,\lambda\_{E})=% \operatorname{\mathcal{D}}\_{\lambda}(M)\_{n}(E). |  |

(D3’):
:   Completely analogous to 3.2.1.

(D4’):
:   If \mathcal{O} is a 1-dimensional local domain which is essentially of finite type over S, with fraction field F and residue field \kappa, then we have a map

    |  |  |  |  |
    | --- | --- | --- | --- |
    | (3.3.4.f) |  | \displaystyle\partial\_{\mathcal{O}}:\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n% }(F)=M\_{n}(F,\lambda\_{F})\xrightarrow{\eqref{eq:normres}}M\_{n-1}(\kappa,% \lambda\_{\kappa})=\operatorname{\mathcal{D}}\_{\lambda}(M)\_{n-1}(\kappa). |  |