Then we have

|  |  |  |  |
| --- | --- | --- | --- |
|  | e(G)=c(n,k)-q\geq(n-2k)k(k-1)+2{k\choose 3}+2-6k^{2}-18k. |  | (2) |

By Lemma 8, we have W\_{v}\leq k(k-1) for all v\in V(G). Let W:=\{v\in V(G)\ |\ W\_{v}=k(k-1)\}. Then we have the following claim.

Claim 2. W\neq\emptyset.

Suppose to the contrary that W\_{v}<k(k-1) for all v\in V(G). By the definition of weight function, we have W\_{v}\leq k(k-1)-2/3 for all v\in V(G). So

|  |  |  |  |
| --- | --- | --- | --- |
|  | \displaystyle e(G)=\sum\_{v\in V(G)}W\_{v}\leq nk(k-1)-2n/3. |  | (3) |

Combining (2) and (3), we may infer that

|  |  |  |
| --- | --- | --- |
|  | n\leq\frac{5}{2}k^{3}+\frac{15}{2}k^{2}+26k-3, |  |

a contradiction. This completes the proof of Claim 2.

By Claim 2, we may choose x\in W such that W\_{x}=k(k-1). Then by Lemma 8, N\_{G}(x) is the disjoint union of two complete 2-graphs on k vertices and every edge of N\_{G}(x) is in A-type. Denote the two complete subgraphs by R\_{1} and R\_{2}.

Claim 3.  |\{c(e)\ |\ x\in e\mbox{ and }e\subseteq{[n]\choose 3}\}|\leq 2{k\choose 2}+1.

Otherwise, suppose that |\{c(e)\ |\ x\in e\mbox{ and }e\subseteq{[n]\choose 3}\}|\geq 2{k\choose 2}+2. Then one can see that

|  |  |  |  |
| --- | --- | --- | --- |
|  | \displaystyle|\{c(p\cup\{x\})\ |\ p\notin E(R\_{1}\cup R\_{2})\mbox{ and }p\in{[% n]-x\choose 2}\}|\geq 2. |  | (4) |

We choose T\_{1},T\_{2}\in{[n]-\{x\}\choose 2}-({V(R\_{1})\choose 2}\cup{V(R\_{2})\choose 2}) such that c(T\_{1}\cup\{x\})\neq c(T\_{2}\cup\{x\}), and for i\in[2], c(T\_{i}\cup\{x\})\notin\{c(p\cup\{x\})\ |\ p\in E(R\_{1}\cup R\_{2})\}. For i\in[2], F-V(T\_{i}) has a matching M\_{i} of size k-1. Note that

|  |  |  |
| --- | --- | --- |
|  | |V(M\_{1}\cup M\_{2})\cup T\_{1}\cup T\_{2}|\leq 2k+4. |  |

So by Lemma 9, we may choose T\_{0}\in Q such that x\notin T\_{0} and T\_{0}\cap V(M\_{1}\cup M\_{2}\cup\{T\_{1},T\_{2}\})=\emptyset. It follows that either \{p\cup\{x\}\ |\ p\in M\_{1}\cup\{T\_{1},T\_{0}\}\} or \{p\cup\{x\}\ |\ p\in M\_{2}\cup\{T\_{2},T\_{0}\}\} induces a rainbow copy of \mathcal{F}\_{k+1}, a contradiction.
This completes the proof of Claim 3.

Let \mathcal{G}^{\prime} be a rainbow edge-colored subgraph of \mathcal{G}-\{x\} obtained by deleting the triples colored by the colors from \{c(e)\ |\ x\in e\mbox{ and }e\in{[n]\choose 3}\}.
By Claim 3, e(\mathcal{G}^{\prime})\geq f(n-1,k)+1. Thus \mathcal{G}^{\prime} has a rainbow copy of \mathcal{F}\_{k} with core y. Choosing y^{\prime}\in[n]-V(\mathcal{F}\_{k})-\{x\}, in view of the preceding analysis, we know that c(\{x,y,y^{\prime}\})\notin\{c(e)\ |\ e\in\mathcal{F}\_{k}\}. It follows that \{x,y,y^{\prime}\}\cup\mathcal{F}\_{k} a rainbow copy of \mathcal{F}\_{k+1}, a contradiction. This completes the proof.

Case 2. k\geq 4 is even.

Then we have